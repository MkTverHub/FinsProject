
<!DOCTYPE html>

<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">

<head>
    <user_fragment_1 th:replace="fragments\master\fragment_agrigate_master_head.html :: master_head_1"></user_fragment_1>
    <title>Финансовые операции</title>
    <script src="webapp/js/js_general_functions.js"></script>
    <script src="webapp/js/js_finsoperationpage.js"></script>
</head>

<body>
<!-- *************************************************************** -->
<!-- Главная обертка для всего сайта -->
<!-- *************************************************************** -->
<div class="vip-wrapper">

    <!--Фрагмент спиннера-->
    <div th:replace="fragments\layouts\fragment_agrigate_layouts_spiner.html :: spinner_fragment_1"/>

    <!--Фрагмент модального окна-->
    <div th:replace="fragments\layouts\fragment_agrigate_layouts_modal.html :: modal_fragment_1"/>

    <!-- *************************************************************** -->
    <!-- Верхнее Меню -->
    <!-- *************************************************************** -->
    <header th:replace="fragments\layouts\fragment_agrigate_layouts_header_menu_top.html :: header_fragment_1(AccountMail=${AccountMail},UserAdmFlg=${attrUserAdmFlg})"></header>

    <!-- *************************************************************** -->
    <!-- Левое Меню -->
    <!-- *************************************************************** -->

    <section th:replace="fragments\layouts\fragment_agrigate_layouts_left_menu_sidebar.html :: left_menu_sidebar_1"></section>

    <!-- *************************************************************** -->
    <!-- Центральная часть -->
    <!-- *************************************************************** -->

    <section class="page-wrap">

        <div class="page-breadcrumb">
            <div class="row">

                <!-- Подробная информация о проекте -->
                <div class="col-7 align-self-center">
                    <h3 class="page-title text-truncate text-dark font-weight-medium mb-1">Финансовые операции</h3>

                    <!-- Хлебные крошки -->
                    <div class="d-flex align-items-center">
                        <nav aria-label="breadcrumb">
                            <ol class="breadcrumb mt-2 p-0">
                                <li class="breadcrumb-item text-muted active" aria-current="page"><a href="#">Проект</a></li>
                            </ol>
                        </nav>
                    </div>
                </div>

            </div>
        </div>

        <div class="container">

            <!-- *************************************************************** -->
            <!-- Карточка Учета -->
            <!-- *************************************************************** -->

            <div class="row">
                <div class="col-sm-12 col-md-8">
                    <div class="card">
                        <div class="card-body">
                            <!-- Шапка с полями РАСХОД ПЕРЕВОД ПРИХОД -->
                            <ul class="nav nav-tabs nav-justified nav-bordered mb-5">
                                <li class="nav-item">
                                    <a href="#" data-toggle="tab" aria-expanded="false" class="nav-link" id="expensebt">
                                        <i class="mdi mdi-home-variant d-lg-none d-block mr-1"></i>
                                        <span class="d-none d-lg-block font-weight-medium">- РАСХОД</span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="#" data-toggle="tab" aria-expanded="true" class="nav-link" id="transferbt">
                                        <i class="mdi mdi-account-circle d-lg-none d-block mr-1"></i>
                                        <span class="d-none d-lg-block font-weight-medium">→ ПЕРЕВОД</span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="#" data-toggle="tab" aria-expanded="false" class="nav-link" id="arrivalbt">
                                        <i class="mdi mdi-settings-outline d-lg-none d-block mr-1"></i>
                                        <span class="d-none d-lg-block font-weight-medium">+ ПРИХОД </span>
                                    </a>
                                </li>
                            </ul>

                            <!--Мапим form с классом Financedataform и вешаем action для Controller-->
                            <form id="id_financedataform" action="#" method="post">
                                <div class="form-body">

                                    <!-- Системное. Поле хранящее тип редактирования записи (insert/update/delete)-->
                                    <div class="form-group f-d-n">
                                        <input type="text" class="form-control" id="finsedittypeid">
                                    </div>
                                    <!-- Системное. Поле тип финансовой операции profit - приход, expense - расход, transfer - перевод-->
                                    <div class="form-group f-d-n">
                                        <input type="text" class="form-control" id="finsopertypeid">
                                    </div>
                                    <!-- Системное. Поле ввода ID-->
                                    <div class="form-group f-d-n">
                                        <input type="text" class="form-control" id="recordid" >
                                    </div>
                                    <!-- Системное. Поле ввода Признак блокировки-->
                                    <div class="form-group f-d-n">
                                        <input type="text" class="form-control" id="fieldlockflgid" >
                                    </div>
                                    <!-- Системное. Поле ввода Id Контрагента-->
                                    <div class="form-group f-d-n">
                                        <input type="text" class="form-control" id="finscontragentid">
                                    </div>
                                    <!-- Системное. Поле ввода Id Реквизита-->
                                    <div class="form-group f-d-n">
                                        <input type="text" class="form-control" id="requisitesid" >
                                    </div>

                                    <!-- Системное. Поле ввода Project Id-->
                                    <div class="form-group f-d-n">
                                        <input type="text" class="form-control" id="projectidid" >
                                    </div>

                                    <!-- Поле ввода Дата операции-->
                                    <div class="form-group">
                                        <div class="row">
                                            <label class="col-lg-4 align-self-center">Дата операции</label>
                                            <div class="col-lg-8 align-self-center">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <input type="date" class="form-control" id="fieldoperdateuserid">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Поле ввода Сумма-->
                                    <div class="form-group">
                                        <div class="row">
                                            <label class="col-lg-4 align-self-center">Сумма</label>
                                            <div class="col-lg-8 align-self-center">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <input type="text" class="form-control" id="fieldamountid">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Поле ввода Счет поступления-->
                                    <div class="form-group" id="divpaymentaccinid">
                                        <div class="row">
                                            <label class="col-lg-4 align-self-center">Счет поступления</label>
                                            <div class="col-lg-8 align-self-center">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <!--<input type="text" class="form-control" id="paymentaccinid">-->
                                                        <select id="paymentaccinid_list" class="form-control custom-select" select_value="">
                                                            <option value="0">Выберите счет</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Поле ввода Счет списания-->
                                    <div class="form-group" id="divpaymentaccoutid">
                                        <div class="row">
                                            <label class="col-lg-4 align-self-center">Счет списания</label>
                                            <div class="col-lg-8 align-self-center">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <!--<input type="text" class="form-control" id="paymentaccoutid">-->
                                                        <select id="paymentaccoutid_list" class="form-control custom-select" select_value="">
                                                            <option value="0">Выберите счет</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Поле ввода Контрагент-->
                                    <div class="form-group" id="divcontragentfieldid">
                                        <div class="row">
                                            <label class="col-lg-4 align-self-center">Контрагент</label>
                                            <div class="col-lg-8 align-self-center">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <select id="contr_agent_select_field" class="form-control custom-select">
                                                            <option value="0">Выберите контрагента</option>
                                                            <option></option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                     <!-- Поле ввода Реквизиты-->
                                    <div class="form-group" id="divcontragentrequisitsid">
                                        <div class="row">
                                            <label class="col-lg-4 align-self-center">Реквизиты</label>
                                            <div class="col-lg-8 align-self-center">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <select id="contr_agent_requisits_list" class="form-control custom-select">
                                                            <option value="0">Выберите реквизиты</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Поле ввода Статья-->
                                    <div class="form-group">
                                        <div class="row">
                                            <label class="col-lg-4 align-self-center">Статья</label>
                                            <div class="col-lg-8 align-self-center">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <!--<input type="text" class="form-control" id="finsarticleid" >-->
                                                        <select id="finsarticleid_list" class="form-control custom-select" select_value="">
                                                            <option value="0">Выберите статью</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Поле ввода Цели-->
                                    <div class="form-group">
                                        <div class="row">
                                            <label class="col-lg-4 align-self-center">Цели</label>
                                            <div class="col-lg-8 align-self-center">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <!--<input type="text" class="form-control" id="finsarticleid" >-->
                                                        <select id="purpose_list_id" class="form-control custom-select" select_value="">
                                                            <option value="0">Выберите цель</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Поле ввода Детали-->
                                    <div class="form-group">
                                        <div class="row">
                                            <label class="col-lg-4 align-self-center">Детали</label>
                                            <div class="col-lg-8 align-self-center">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <input type="text" class="form-control" id="fielddetailid">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                                
                            </form>
                            <!-- Кнопки для записи в БД -->
                            <div class="form-actions">
                                <div class="text-right">
                                    <button onClick='NewFinsOperation()' class="btn waves-effect waves-light btn-outline-primary btn-modif-size">Создать</button>
                                    <button onClick='SaveFinsOperation()' class="btn waves-effect waves-light btn-outline-secondary btn-modif-size">Сохранить</button>
                                    <button onClick='ResetFinsOperation()' class="btn waves-effect waves-light btn-outline-secondary btn-modif-size">Отменить</button>
                                    <button onClick='DeleteFinsOperation()' class="btn waves-effect waves-light btn-outline-secondary btn-modif-size">Удалить</button>
                                </div>
                            </div>
                        </div>
                    </div> <!-- модуль с формой .end -->

                </div>


                <!-- *************************************************************** -->
                <!-- Карточка с информацией -->
                <!-- *************************************************************** -->
                <div class="col-sm-12 col-md-4">
                    <div class="card">
                        <div class="card-body">
                            <div class="d-flex d-lg-flex d-md-block align-items-center">
                                <div>
                                    <h2 class="text-dark mb-1 w-100 text-truncate font-weight-medium" id="projectprofitid"></h2>
                                    <h6 class="text-muted font-weight-normal mb-0 w-100 text-truncate">Деньги
                                    </h6>
                                </div>
                                <div class="ml-auto mt-md-3 mt-lg-0">
                                    <span class="opacity-7">₽</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                            <div class="card-body">
                                <div class="d-flex d-lg-flex d-md-block align-items-center">
                                    <div>
                                        <h4 class="text-dark mb-1 w-100 text-truncate font-weight-medium">Транзакции:
                                        </h4>
                                    </div>
                                </div>
                                <div class="d-flex d-lg-flex d-md-block align-items-center">
                                    <div>
                                        <h6 class="font-weight-normal mb-0 w-100 text-truncate">Приход
                                        </h6>
                                    </div>
                                    <div class="ml-auto mt-md-1">
                                        <div class="opacity-9 fin-operation-color-green" id="projectprofitid_sub">
                                            <span class="opacity-7"> ₽</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="d-flex d-lg-flex d-md-block align-items-center">
                                    <div>
                                        <h6 class="font-weight-normal mb-0 w-100 text-truncate">Расход
                                        </h6>
                                    </div>
                                    <div class="ml-auto mt-md-1">
                                        <div class="opacity-9 fin-operation-color-red" id="projectexpenseid_sub">
                                            <span class="opacity-7"> ₽</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="d-flex d-lg-flex d-md-block align-items-center">
                                    <div>
                                        <h6 class="font-weight-normal mb-0 w-100 text-truncate">Сальдо
                                        </h6>
                                    </div>
                                    <div class="ml-auto mt-md-1">
                                        <div class="opacity-9" id="projectsaldoid_sub">
                                            <span class="opacity-7"> ₽</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div> 

                </div>

            </div>
    
            <!-- *************************************************************** -->
            <!-- ТАБЛИЦА - ПОДРОБНАЯ ИНФОРМАЦИЯ -->
            <!-- *************************************************************** -->

            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <div class="card-body">
                            <h4 class="card-title">Подробная информация</h4>
                            <h6 class="card-subtitle">Cписок всех финансовых операции по текущему проекту. Вы можете изменить или удалить нужную запись, достаточно кликнув по ней.</h6>
                            <div class="row mb-1">
                                <div class="col-sm-3 col-md-3 mb-3">
                                    <div class="input-group">
                                        <select class="custom-select" id="inputGroupSelect04">
                                            <option selected="">Количество</option>
                                            <option value="50">50</option>
                                            <option value="75">75</option>
                                            <option value="100">100</option>
                                            <option value="150">150</option>
                                        </select>
                                        <div class="input-group-append">
                                            <button class="btn btn-outline-secondary" type="button">Показать</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-3 col-md-3 mb-3">
                                    <div class="input-group">
                                        <select class="custom-select" id="paymentacc_select_id_list" select_value="">
                                            <option value="def" elected="true">Выбрать знчение</option>
                                            <option value="today">Сегодня</option>
                                            <option value="yesterday">Вчера</option>
                                            <option value="last7days">Последние 7 д</option>
                                            <option value="last30days">Последние 30 д</option>
                                            <option value="last3month">Последние 3 мес</option>
                                        </select>
                                        <div class="input-group-append">
                                            <button onClick='SearchSpecification2()' class="btn btn-outline-secondary" type="button">Показать</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-md-6 mb-3">
                                    <div class="text-right">
                                        <button class="btn btn-outline-secondary ml-1" type="button" data-toggle="collapse" data-target="#collapseExampleSer" aria-expanded="true" aria-controls="collapseExampleSer">
                                        Фильтр
                                        </button>
                                    </div> 
                                
                                    <div class="collapse hide mt-4 mb-2 border card" id="collapseExampleSer" style="">
                                        <div class="card-body">
                                            <!--Фильтер форма с полями -->
                                                <form action="#">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <div class="row">
                                                                <div class="col-md-12">
                                                                    <label>Тип операции</label>
                                                                    <div class="customize-input">
                                                                        <select class="custom-select form-control" id="operation_type_field_ss1" select_value="All">
                                                                            <option selected="All">Выберите значение</option>
                                                                            <option value="All">Все операции</option>
                                                                            <option value="expense">Расход</option>
                                                                            <option value="transfer">Перевод</option>
                                                                            <option value="profit">Приход</option>
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="form-group">
	                                                        <div class="row">
	                                                            <div class="col-md-12">
	                                                                <label>Дата</label>
	                                                                <div class="row">
	                                                                    <label class="text-right col-lg-4 align-self-center">От</label>
	                                                                    <div class="col-lg-8 align-self-center mb-1">
	                                                                        <input type="date" class="form-control" id="date_from_ss1">
	                                                                    </div>
	                                                                </div>
	                                                                <div class="row">
	                                                                    <label class="text-right col-lg-4 align-self-center">До</label>
	                                                                    <div class="col-lg-8 align-self-center mb-1">
	                                                                        <input type="date" class="form-control" id="date_to_ss1">
	                                                                    </div>
	                                                                </div>
	                                                            </div>
	                                                        </div>  
	                                                    </div> 

	                                                    <div class="form-group">
		                                                    <div class="row">
		                                                        <div class="col-md-12">
		                                                            <label>Сумма</label>
		                                                            <div class="row">
		                                                                <label class="text-right col-lg-4 align-self-center">От</label>
		                                                                <div class="col-lg-8 align-self-center mb-1">
		                                                                    <input type="number" class="form-control" id="amount_from_ss1">
		                                                                </div>
		                                                            </div>
		                                                            <div class="row">
		                                                                <label class="text-right col-lg-4 align-self-center">До</label>
		                                                                <div class="col-lg-8 align-self-center mb-1">
		                                                                    <input type="number" class="form-control" id="amount_to_ss1">
		                                                                </div>
		                                                            </div>
		                                                        </div>
		                                                    </div>  
		                                                </div> 

		                                                <div class="form-group">
                                                            <div class="row">
                                                                <div class="col-md-12">
                                                                    <label>Контрагенты</label>
                                                                    <div class="customize-input">
                                                                        <select class="custom-select form-control" id="contr_agent_select_field_ss1" select_value="0">
                                                                            <!--<option selected="">Выбрать</option>-->
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="form-group">
                                                            <div class="row">
                                                                <div class="col-md-12">
                                                                    <label>Сотрудник</label>
                                                                    <div class="customize-input">
                                                                        <select class="custom-select form-control" id="contact_ss1" select_value="0">
                                                                            <!--<option selected="">Выбрать</option>-->
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="form-group">
                                                            <div class="row">
                                                                <div class="col-md-12">
                                                                    <label>Статья</label>
                                                                    <div class="customize-input">
                                                                        <select class="custom-select form-control" id="article_ss1" select_value="0">
                                                                            <!--<option selected="">Выбрать</option>-->
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="form-group">
                                                            <div class="row">
                                                                <div class="col-md-12">
                                                                    <label>Цель</label>
                                                                    <div class="customize-input">
                                                                        <select class="custom-select form-control" id="purpose_ss1" select_value="0">
                                                                            <!--<option selected="">Выбрать</option>-->
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </form>

                                            <!-- Кнопки для поиска записи в БД -->
                                            <div class="form-actions">
                                                <div class="text-right">
                                                    <button onClick='ResetSS1()' class="btn waves-effect waves-light btn-outline-warning">Сброс</button>
                                                    <button onClick='SearchSpecification1()' class="btn waves-effect waves-light btn-outline-success">Поиск</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="table-responsive">
                                <table id="financedatatable" class="table table-striped table-bordered no-wrap table-hover">
                                    <thead> <!-- Заголовок таблицы -->
                                    <tr>
                                        <!--<th class="f-d-n">Тип операции</th>-->
                                        <!--<th class="f-d-n">Id проекта</th>-->
                                        <!--<th class="f-d-n">Row_ID</th>-->
                                        <!--<th class="f-d-n">Блок Флаг</th>-->
                                        <!--<th class="f-d-n">Сумма</th>--->
                                        <th>Тип операции</th>
                                        <th>Дата операции</th>
                                        <th>Сумма</th>
                                        <th>Счет поступления</th>
                                        <th>Счет списания</th>
                                        <th>Статья</th>
                                        <th>Цель</th>
                                        <th>Детали</th>
                                        <th>Дата создания</th>
                                        <th>Кто создал</th>   
                                    </tr>
                                    </thead>
                                    <tbody id="financetable"></tbody>
                                </table>
                            </div>
                            <div class="row mt-3">
                                <div class="col-sm-12 col-md-12">
                                    <div class="fin-operation-show-all-box">
                                    	<button onClick='BackFinsOperationRowGroup()' type="button" class="fin-operation-show-all-btn">< Назад</button>
                                        <input type="text" class="form-control f-d-n" id="fins_operation_count_id" value="5">
                                        <input type="text" class="form-control f-d-n" id="fins_operation_counter_id">
                                        <button onClick='NextFinsOperationRowGroup()' type="button" class="fin-operation-show-all-btn">Вперед ></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- *************************************************************** -->
            <!-- Конец центрального блока -->
            <!-- *************************************************************** -->

        </div>
    </section>

    <!-- ============================================================== -->
    <!-- footer -->
    <!-- ============================================================== -->
    <div th:replace="fragments\layouts\fragmetn_agrigate_layouts_footer.html :: footer_fragment_1"/>
    <!-- ============================================================== -->
    <!-- End footer -->
    <!-- ============================================================== -->

    <!-- *************************************************************** -->
    <!-- Конец главной обертки для всего сайта -->
    <!-- *************************************************************** -->

</div>


<!----------- User Script----------------------------->
<!--
    Ajax в внешнем файле, чтобы работал нужно объявлять файл в начале html
-->

<script type="text/javascript">
    window.onload = function(){ $("#spinner_main_div").addClass('f-d-n');}
    //Событие загрузки страницы
    $(document).ready(function(){
        //StartPage();
    });
</script>


<!------------FRAMEWORK Script----------------------------->
<script_fragment  th:replace="fragments\master\fragment_agrigate_master_script.html :: master_script_1"></script_fragment>

</body>

</html>
